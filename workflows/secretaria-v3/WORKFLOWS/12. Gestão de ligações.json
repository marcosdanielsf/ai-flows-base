{
  "name": "12. Gest√£o de liga√ß√µes",
  "nodes": [
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "Jm6Vdi0gjxV5AJE2",
          "mode": "list",
          "cachedResultUrl": "/workflow/Jm6Vdi0gjxV5AJE2",
          "cachedResultName": "<selecionar ou criar subworkflow 04. Criar evento Google Calendar>"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "evento_inicio": "={{ $json.body.evento_inicio }}",
            "duracao_minutos": 60,
            "titulo": "={{ $json.body.titulo }}",
            "descricao": "={{ $json.body.descricao }}\n\nTelefone: {{ $json.headers['x-retell-user-number'] || '' }}",
            "id_agenda": "={{ $json.body.id_agenda }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "evento_inicio",
              "displayName": "evento_inicio",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "duracao_minutos",
              "displayName": "duracao_minutos",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "number"
            },
            {
              "id": "titulo",
              "displayName": "titulo",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "descricao",
              "displayName": "descricao",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            },
            {
              "id": "id_agenda",
              "displayName": "id_agenda",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string"
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        2864,
        592
      ],
      "id": "fa1a1cd0-2f20-426d-beac-c920d2246866",
      "name": "Criar evento"
    },
    {
      "parameters": {
        "operation": "getAll",
        "calendar": {
          "__rl": true,
          "value": "={{ $json.body.id_agenda }}",
          "mode": "id"
        },
        "returnAll": true,
        "timeMax": "=",
        "options": {
          "query": "={{ $json.headers['x-retell-user-number'] || '' }}"
        }
      },
      "type": "n8n-nodes-base.googleCalendar",
      "typeVersion": 1.3,
      "position": [
        2352,
        592
      ],
      "id": "a3482a14-0075-4020-8e0e-ba9a567a9142",
      "name": "Buscar eventos"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        1648,
        1440
      ],
      "id": "65008179-2655-480b-8970-f722d6d49cf2",
      "name": "Follow-up no WhatsApp ap√≥s chamada"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "1df32ac3-63f4-4e17-9c5b-1c4f6cfda635",
              "name": "cobranca_valor",
              "value": "500",
              "type": "string"
            },
            {
              "id": "40ff895f-f63f-4e4f-bba3-c7d803c277f1",
              "name": "url_chatwoot",
              "value": "<inserir url do seu chatwoot>",
              "type": "string"
            },
            {
              "id": "1b513343-9b6a-4f6e-a012-ed819bf34a31",
              "name": "id_conta",
              "value": "=1",
              "type": "string"
            },
            {
              "id": "d540447e-4fa3-46c0-bc53-1f63433b4a70",
              "name": "id_inbox",
              "value": "1",
              "type": "string"
            },
            {
              "id": "a1ae5215-cb10-4482-a5b0-b59cb0407171",
              "name": "url_asaas",
              "value": "https://api-sandbox.asaas.com",
              "type": "string"
            },
            {
              "id": "8bf522a6-75fb-434a-854c-b736539309e1",
              "name": "telefone",
              "value": "={{ $json.headers['x-retell-user-number'] || '' }}",
              "type": "string"
            },
            {
              "id": "5d1d628d-919d-4d4f-8636-44a9e5998062",
              "name": "nome",
              "value": "={{ $json.body.nome }}",
              "type": "string"
            },
            {
              "id": "3ecd7058-99d4-4bc9-9701-fe641146ae7f",
              "name": "cpf",
              "value": "={{ $json.body.cpf }}",
              "type": "string"
            },
            {
              "id": "bbae5d9c-d534-4454-a798-bd1ba5ae41e4",
              "name": "cobranca_vencimento",
              "value": "={{ $json.body.cobranca_vencimento }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1792,
        848
      ],
      "id": "c0eab574-8b70-4c79-b491-4255c0d03487",
      "name": "Info"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "B3uXPbfJAnhFWXXx",
          "mode": "list",
          "cachedResultUrl": "/workflow/B3uXPbfJAnhFWXXx",
          "cachedResultName": "<selecionar ou criar subworkflow 10. Buscar ou criar contato + conversa>"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "telefone": "={{ $('Info').item.json.telefone }}",
            "id_conta": "={{ $('Info').item.json.id_conta }}",
            "id_inbox": "={{ $('Info').item.json.id_inbox }}",
            "url_chatwoot": "={{ $('Info').item.json.url_chatwoot }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "telefone",
              "displayName": "telefone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "id_conta",
              "displayName": "id_conta",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "id_inbox",
              "displayName": "id_inbox",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "url_chatwoot",
              "displayName": "url_chatwoot",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            }
          ],
          "attemptToConvertTypes": true,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        2016,
        848
      ],
      "id": "406733ea-9eb3-4c89-8bb5-6ef27439f315",
      "name": "Buscar ou criar contato"
    },
    {
      "parameters": {
        "content": "## Configurar node Info!!",
        "height": 208,
        "width": 272,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1712,
        784
      ],
      "typeVersion": 1,
      "id": "35781640-1a1d-4333-b1b6-c1f5934419c7",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "2b17e799-2b2d-409e-b4b4-edb38b3331b9",
              "leftValue": "={{ $('Criar ou buscar cobran√ßa2').item.json.resultado }}",
              "rightValue": "Cobran√ßa criada.",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        2432,
        848
      ],
      "id": "d4cafab2-5eeb-49b0-b7c8-924114becf24",
      "name": "Nova cobran√ßa?"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "ca7d9f97-b9d4-4d95-b5ed-b3d951abe5da",
              "name": "resultado",
              "value": "={{ $('Criar ou buscar cobran√ßa2').item.json.resultado }} Link enviado pelo WhatsApp.",
              "type": "string"
            },
            {
              "id": "bc901d49-5b96-4cad-af8c-20c12cef0642",
              "name": "valor",
              "value": "={{ $('Criar ou buscar cobran√ßa2').item.json.valor }}",
              "type": "string"
            },
            {
              "id": "81fee5c4-d16e-4876-ad0d-896281ca5561",
              "name": "vencimento",
              "value": "={{ $('Criar ou buscar cobran√ßa2').item.json.vencimento }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2880,
        768
      ],
      "id": "5e7bf916-edcf-4c7c-8b79-0a6a3062cadf",
      "name": "Resultado"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "",
        "responseMode": "lastNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        1584,
        848
      ],
      "id": "9e210305-8da4-4fc6-8b74-ecd54332d3d5",
      "name": "Criar ou buscar cobran√ßa"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.noOp",
      "typeVersion": 1,
      "position": [
        2672,
        944
      ],
      "id": "5d08babd-acbd-435c-8a7a-36a407250d2d",
      "name": "Ignorar busca de cobran√ßa existente"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "fc6ea9ec-fc03-4d81-b5c9-4521b8c843df",
              "leftValue": "={{ $json.body.event }}",
              "rightValue": "call_ended",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            },
            {
              "id": "a8f5a3a9-e3c1-44c5-be41-0d066320ec11",
              "leftValue": "={{ $json.body.call.transcript }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "notEmpty",
                "singleValue": true
              }
            },
            {
              "id": "971ed32b-8eba-4f1a-9a55-2eddef0003b2",
              "leftValue": "={{ $json.body.call.call_type }}",
              "rightValue": "phone_call",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        1856,
        1440
      ],
      "id": "1b806d11-3304-4645-a9fe-afa1caf0114d",
      "name": "Chamada encerrada?"
    },
    {
      "parameters": {},
      "type": "n8n-nodes-base.noOp",
      "typeVersion": 1,
      "position": [
        2096,
        1536
      ],
      "id": "89d3ad52-576d-47d9-a9d4-8b7e11bd1c94",
      "name": "Ignorar outros eventos de chamada"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4.1-mini",
          "mode": "list"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        2432,
        1536
      ],
      "id": "af10bbf5-7952-4130-9dba-2053f5f99ecf",
      "name": "OpenAI"
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $('Buscar ou criar contato2').item.json.contato.phone_number }}",
        "tableName": "n8n_historico_mensagens",
        "contextWindowLength": 50
      },
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "typeVersion": 1.3,
      "position": [
        2544,
        1536
      ],
      "id": "a6e1b0a3-a328-459f-b0d1-7dd7954b6195",
      "name": "Memory"
    },
    {
      "parameters": {
        "content": "## Configurar node Info!!",
        "height": 208,
        "width": 272,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2000,
        1312
      ],
      "typeVersion": 1,
      "id": "5e7b9884-9629-4177-85a9-511da3257cff",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "={{ $('Info').item.json.url_chatwoot }}/api/v1/accounts/{{ $('Info').item.json.id_conta }}/conversations/{{ $('Buscar ou criar contato').item.json.conversa.id }}/messages",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "chatwootApi",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "content",
              "value": "=Ol√° {{ $('Info').item.json.nome }}!\n\nEstamos aguardando o pagamento no valor de R${{ $('Info').item.json.cobranca_valor }} relativo a sua consulta.\n\nClique aqui para ver mais informa√ß√µes sobre o pagamento: {{ $('Criar ou buscar cobran√ßa2').item.json.link }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2672,
        768
      ],
      "id": "88c53690-ffb1-48eb-974f-405bc58d087a",
      "name": "Enviar notifica√ß√£o cobran√ßa",
      "executeOnce": false
    },
    {
      "parameters": {
        "method": "POST",
        "url": "={{ $('Info5').item.json.url_chatwoot }}/api/v1/accounts/{{ $('Info5').item.json.id_conta }}/conversations/{{ $('Buscar ou criar contato2').item.json.conversa.id }}/messages",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "chatwootApi",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "content",
              "value": "={{  $('Agente de Follow-up de Chamada').item.json.output }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2816,
        1376
      ],
      "id": "3425102b-3a1f-4bdd-b0e9-466b57e77a5e",
      "name": "Enviar mensagem follow-up chamada",
      "executeOnce": false
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $('Info5').item.json.transcricao }}",
        "options": {
          "systemMessage": "=# PAPEL\n\n<papel>\n  Voc√™ √© a Maria, secret√°ria virtual da Cl√≠nica Moreira, respons√°vel por processar transcri√ß√µes de liga√ß√µes telef√¥nicas e enviar resumos via WhatsApp. Sua fun√ß√£o √© extrair informa√ß√µes relevantes da conversa e comunicar de forma clara e concisa os pr√≥ximos passos ao paciente.\n</papel>\n\n# PERSONALIDADE E TOM DE VOZ\n\n<personalidade>\n  * **Objetiva e organizada**: Sintetize informa√ß√µes complexas em pontos claros\n  * **Profissional e confi√°vel**: Transmita seguran√ßa sobre o que foi conversado\n  * **Atenciosa aos detalhes**: Capture todos os compromissos e combinados\n  * **Proativa**: Antecipe pr√≥ximas a√ß√µes necess√°rias\n  * **Clara e confirmat√≥ria**: Elimine ambiguidades da conversa telef√¥nica\n</personalidade>\n\n# CONTEXTO DA TAREFA\n\n<contexto>\n  Uma liga√ß√£o telef√¥nica acaba de ocorrer entre o paciente e a cl√≠nica. Voc√™ recebe a transcri√ß√£o e deve:\n  \n  1. Identificar o assunto principal da liga√ß√£o\n  2. Extrair compromissos, datas e a√ß√µes acordadas\n  3. Criar mensagem de follow-up confirmando os pontos importantes\n  4. Incluir pr√≥ximos passos, se houver\n  \n  **IMPORTANTE**: A mensagem serve como registro escrito do que foi conversado por telefone.\n</contexto>\n\n# SOP - PROCEDIMENTO OPERACIONAL PADR√ÉO\n\n## 1. AN√ÅLISE DA TRANSCRI√á√ÉO\n\n<analise-transcricao>\n  ### 1.1 Identifica√ß√£o de Elementos-Chave\n  \n  Procure e extraia:\n  * **MOTIVO**: Raz√£o principal da liga√ß√£o\n  * **DECIS√ïES**: O que foi decidido ou acordado\n  * **DATAS/HOR√ÅRIOS**: Compromissos marcados\n  * **VALORES**: Custos mencionados\n  * **PEND√äNCIAS**: O que ficou para resolver\n  * **RESPONS√ÅVEIS**: Quem far√° o qu√™\n  \n  ### 1.2 Classifica√ß√£o do Tipo de Liga√ß√£o\n  \n  * **Agendamento**: Nova consulta marcada\n  * **Reagendamento**: Altera√ß√£o de consulta existente\n  * **Cancelamento**: Consulta desmarcada\n  * **Esclarecimento**: D√∫vidas respondidas\n  * **Emerg√™ncia**: Situa√ß√£o urgente tratada\n  * **Administrativo**: Quest√µes de pagamento/documentos\n  \n  ### 1.3 Valida√ß√£o de Informa√ß√µes\n  \n  * Verifique consist√™ncia de datas e hor√°rios\n  * Confirme nomes de profissionais mencionados\n  * Valide valores com tabela padr√£o\n  * Identifique poss√≠veis mal-entendidos\n</analise-transcricao>\n\n## 2. ESTRUTURA√á√ÉO DA MENSAGEM\n\n<estruturacao-mensagem>\n  ### 2.1 Formato Padr√£o\n  \n  ```\n  APRESENTA√á√ÉO\n  ‚Üì\n  REFER√äNCIA √Ä LIGA√á√ÉO\n  ‚Üì\n  RESUMO DO ASSUNTO PRINCIPAL\n  ‚Üì\n  PONTOS ACORDADOS (se houver)\n  ‚Üì\n  PR√ìXIMAS A√á√ïES (se houver)\n  ‚Üì\n  CONFIRMA√á√ÉO/ENCERRAMENTO\n  ```\n  \n  ### 2.2 Componentes por Tipo\n  \n  **Apresenta√ß√£o (obrigat√≥ria em todas as mensagens):**\n  * Inicie sempre com \"Ol√°, aqui √© a Maria, da Cl√≠nica Moreira\"\n  * Ou varia√ß√µes como \"Oi! Maria da Cl√≠nica Moreira por aqui\"\n  * Mantenha tom profissional mas acolhedor\n  \n  **Para Agendamentos:**\n  * Data, hora e profissional\n  * Valor e forma de pagamento\n  * Documentos necess√°rios\n  * Endere√ßo da cl√≠nica\n  \n  **Para Cancelamentos:**\n  * Confirma√ß√£o do cancelamento\n  * Consulta cancelada (data/profissional)\n  * Men√ß√£o sobre reagendamento futuro\n  \n  **Para D√∫vidas:**\n  * Resumo da informa√ß√£o fornecida\n  * Links ou contatos adicionais\n  * Oferecimento para mais esclarecimentos\n  \n  ### 2.3 Linguagem de Confirma√ß√£o\n  \n  Use termos que reforcem o acordado:\n  * \"Conforme conversamos...\"\n  * \"Como combinado...\"\n  * \"Confirmando o que acertamos...\"\n  * \"Resumindo nossa conversa...\"\n</estruturacao-mensagem>\n\n## 3. FORMATA√á√ÉO E CLAREZA\n\n<formatacao-clareza>\n  ### 3.1 Organiza√ß√£o Visual\n  \n  * Use quebras de linha para separar t√≥picos\n  * Destaque datas e hor√°rios\n  * Enumere a√ß√µes quando m√∫ltiplas\n  * Mantenha par√°grafos curtos\n  \n  ### 3.2 Elimina√ß√£o de Ambiguidades\n  \n  * Converta \"semana que vem\" em data espec√≠fica\n  * Transforme \"de manh√£\" em hor√°rio exato\n  * Especifique \"doutor\" com nome completo\n  * Clarifique \"aquele valor\" com montante exato\n  \n  ### 3.3 Informa√ß√µes Complementares\n  \n  Adicione quando n√£o mencionado mas relevante:\n  * Endere√ßo completo da cl√≠nica\n  * Telefone para contato\n  * Prazo para pagamento\n  * Documentos necess√°rios\n</formatacao-clareza>\n\n# REGRAS E VALIDA√á√ïES\n\n<validacoes>\n  ## Regras Cr√≠ticas\n  \n  1. **Precis√£o Absoluta**\n    * NUNCA invente informa√ß√µes n√£o presentes na transcri√ß√£o\n    * NUNCA altere datas, hor√°rios ou valores\n    * NUNCA adicione compromissos n√£o acordados\n    * SEMPRE use \"se entendi corretamente\" quando houver d√∫vida\n  \n  2. **Limites da Mensagem**\n    * M√°ximo 10-12 linhas (incluindo apresenta√ß√£o)\n    * Foque no essencial\n    * Evite repetir toda a conversa\n    * Priorize a√ß√µes e compromissos\n  \n  3. **Apresenta√ß√£o Obrigat√≥ria**\n    * SEMPRE inicie com apresenta√ß√£o como Maria\n    * Use varia√ß√µes naturais: \"Ol√°, aqui √© a Maria...\" ou \"Oi! Maria por aqui...\"\n    * Mencione \"Cl√≠nica Moreira\" na apresenta√ß√£o\n    * Mantenha tom acolhedor mas profissional\n  \n  4. **Tom Apropriado**\n    * Sempre profissional, nunca casual demais\n    * Evite coment√°rios sobre a qualidade da liga√ß√£o\n    * N√£o mencione problemas t√©cnicos\n    * Mantenha foco no conte√∫do, n√£o no formato\n</validacoes>\n\n# EXEMPLOS DE MENSAGENS\n\n<exemplos>\n  ## Exemplo 1: Agendamento Realizado\n  \n  ```\n  Ol√°, aqui √© a Maria da Cl√≠nica Moreira!\n  \n  Conforme nossa conversa telef√¥nica agora h√° pouco:\n  \n  ‚úÖ Consulta agendada para quinta-feira, 12/12 √†s 14:00\n  üìç Com Dr. Roberto Almeida - Cardiologista\n  üí∞ Valor: R$ 500,00 (PIX ou cart√£o)\n  \n  Por favor, chegue 15 minutos antes para cadastro.\n  Endere√ßo: Av. das Palmeiras, 1500 - Jardim Am√©rica\n  \n  Qualquer d√∫vida, estamos √† disposi√ß√£o!\n  ```\n  \n  ## Exemplo 2: Reagendamento\n  \n  ```\n  Oi! Maria da Cl√≠nica Moreira por aqui.\n  \n  Confirmando o que acertamos por telefone:\n  \n  Sua consulta foi remarcada de 10/12 para 15/12 √†s 10:00.\n  Permanece com a Dra. Ana Silva.\n  \n  J√° atualizamos em nosso sistema.\n  Obrigada pela compreens√£o!\n  ```\n  \n  ## Exemplo 3: Esclarecimento de D√∫vidas\n  \n  ```\n  Ol√°, aqui √© a Maria da Cl√≠nica Moreira.\n  \n  Resumindo as informa√ß√µes da nossa liga√ß√£o:\n  \n  - Aceitamos seu conv√™nio Unimed\n  - Necess√°rio trazer carteirinha e documento\n  - Consulta particular caso precise: R$ 500,00\n  \n  Para agendar, pode me responder por aqui mesmo.\n  Fico √† disposi√ß√£o!\n  ```\n  \n  ## Exemplo 4: Cancelamento\n  \n  ```\n  Oi! Maria da Cl√≠nica Moreira aqui.\n  \n  Conforme conversado por telefone:\n  \n  ‚úÖ Cancelamos sua consulta de amanh√£ (11/12) √†s 15:00\n  \n  Quando quiser reagendar, √© s√≥ entrar em contato.\n  Esperamos v√™-lo em breve!\n  ```\n  \n  ## Exemplo 5: M√∫ltiplos Assuntos\n  \n  ```\n  Ol√°, aqui √© a Maria da Cl√≠nica Moreira!\n  \n  Resumindo nossa conversa telef√¥nica:\n  \n  1. Consulta dia 13/12 √†s 9h confirmada\n  2. Exames anteriores: trazer se tiver\n  3. Pagamento: pode ser feito na recep√ß√£o\n  4. Retorno: agendar ap√≥s a consulta\n  \n  Alguma d√∫vida sobre o que conversamos?\n  ```\n</exemplos>\n\n# CASOS ESPECIAIS\n\n<casos-especiais>\n  ## Transcri√ß√£o Confusa ou Incompleta\n  \n  * Use \"Pelo que entendi da nossa conversa...\"\n  * Liste apenas pontos claros\n  * Ofere√ßa esclarecimento: \"Se precisar confirmar algo, me avise\"\n  \n  ## Liga√ß√£o Interrompida\n  \n  * Mencione brevemente: \"Sobre nossa liga√ß√£o que caiu...\"\n  * Foque no que foi acordado antes da interrup√ß√£o\n  * Ofere√ßa continuar por mensagem\n  \n  ## M√∫ltiplos Participantes na Liga√ß√£o\n  \n  * Identifique para quem √© cada informa√ß√£o\n  * Separe compromissos por pessoa\n  * Use nomes quando necess√°rio\n  \n  ## Informa√ß√µes Sens√≠veis Mencionadas\n  \n  * N√ÉO inclua diagn√≥sticos ou condi√ß√µes m√©dicas\n  * N√ÉO mencione informa√ß√µes pessoais desnecess√°rias\n  * Foque apenas em quest√µes administrativas\n  \n  ## Promessas N√£o Autorizadas\n  \n  * Se detectar promessa fora do padr√£o\n  * Use: \"Vamos verificar a possibilidade de...\"\n  * N√£o confirme o que n√£o tem certeza\n</casos-especiais>\n\n# OBSERVA√á√ïES FINAIS\n\n<observacoes-finais>\n  ## LEMBRE-SE SEMPRE\n  \n  * ‚ö†Ô∏è SEMPRE inicie a mensagem se apresentando como Maria\n  * ‚ö†Ô∏è Esta mensagem √© o REGISTRO ESCRITO da liga√ß√£o\n  * ‚ö†Ô∏è NUNCA adicione informa√ß√µes n√£o conversadas\n  * ‚ö†Ô∏è Precis√£o √© mais importante que completude\n  * ‚ö†Ô∏è M√°ximo 10-12 linhas de mensagem (incluindo apresenta√ß√£o)\n  * ‚ö†Ô∏è Foque em compromissos e a√ß√µes\n  \n  ## FORMATO DE SA√çDA\n  \n  * Apenas a mensagem de follow-up\n  * Sem an√°lise da transcri√ß√£o\n  * Sem coment√°rios sobre a liga√ß√£o\n  * Direto ao paciente\n  \n  ## VERIFICA√á√ïES IMPORTANTES\n  \n  * A mensagem inicia com apresenta√ß√£o da Maria?\n  * Todas as datas e hor√°rios est√£o corretos?\n  * Os valores mencionados conferem?\n  * As a√ß√µes t√™m respons√°veis claros?\n  * A mensagem confirma o essencial?\n  * Est√° clara e sem ambiguidades?\n  \n  ## QUANDO N√ÉO ENVIAR MENSAGEM\n  \n  * Liga√ß√£o foi apenas engano\n  * Assunto 100% resolvido sem pend√™ncias\n  * Paciente explicitamente pediu para n√£o enviar\n  * Conte√∫do puramente m√©dico/confidencial\n</observacoes-finais>\n\n# INFORMA√á√ïES DO SISTEMA\n\n<informacoes-sistema>\n  **Data e Hora Atual**: {{ $now.format('FFFF') }}\n  **Tipo de Mensagem**: Follow-up de Liga√ß√£o Telef√¥nica\n  **Entrada**: Transcri√ß√£o da conversa telef√¥nica\n  **Objetivo**: Registro escrito do que foi acordado\n</informacoes-sistema>\n"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        2496,
        1376
      ],
      "id": "02760b00-c7e7-4ce2-bdf3-1cb0b21b9be8",
      "name": "Agente de Follow-up de Chamada",
      "retryOnFail": true
    },
    {
      "parameters": {
        "content": "## Configurar node Info!!",
        "height": 208,
        "width": 272,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1952,
        2032
      ],
      "typeVersion": 1,
      "id": "ca88c797-0a0e-4bf2-9964-9d863384d06e",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        2384,
        1808
      ],
      "id": "e6813a0c-ca55-4bf0-91fd-46a2ce31acc4",
      "name": "Liga√ß√µes"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        1680,
        1808
      ],
      "id": "f930da60-21eb-404f-a730-1bc2ca171609",
      "name": "Liga√ß√µes WhatsApp"
    },
    {
      "parameters": {
        "content": "## Configurar node Info!!",
        "height": 208,
        "width": 272,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1808,
        1744
      ],
      "typeVersion": 1,
      "id": "13d11254-ca13-4a23-b6a3-b0ecdae58066",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "content": "## Configurar node Info!!",
        "height": 208,
        "width": 272,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2512,
        1744
      ],
      "typeVersion": 1,
      "id": "aaf48ad8-fa55-4153-969b-16bc96747047",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "content": "## Ferramentas Agente",
        "height": 736,
        "width": 1552,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1520,
        528
      ],
      "id": "010fa20f-9cbc-4e1e-a902-de6f0b9e1461",
      "name": "Sticky Note5"
    },
    {
      "parameters": {
        "content": "## Follow-up p√≥s-chamada",
        "height": 432,
        "width": 1552,
        "color": 2
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1520,
        1280
      ],
      "typeVersion": 1,
      "id": "676d6397-abd3-41eb-b0d3-a921d971c6e6",
      "name": "Sticky Note6"
    },
    {
      "parameters": {
        "content": "## Gest√£o de liga√ß√µes",
        "height": 608,
        "width": 1552,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1520,
        1728
      ],
      "typeVersion": 1,
      "id": "cb9f1577-076b-4fcf-be8a-21c27a100408",
      "name": "Sticky Note7"
    },
    {
      "parameters": {
        "method": "PATCH",
        "url": "={{ $('Info4').item.json.url_chatwoot }}/api/v1/accounts/{{ $('Info4').item.json.id_conta }}/contacts/{{ $('Buscar ou criar contato3').item.json.contato.id }}",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "chatwootApi",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n  \"custom_attributes\": {\n    \"permitir_chamadas_whatsapp\": {{ $('Info4').item.json.permissao_aceita }}\n  }\n}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2720,
        2000
      ],
      "id": "56c13522-949b-452b-b33e-d497868782b0",
      "name": "Atualizar permiss√£o de liga√ß√£o WhatsApp"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "",
        "responseMode": "lastNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        1584,
        1104
      ],
      "id": "6fef1936-f414-4b0b-86ca-21f417351ef4",
      "name": "Buscar hist√≥rico da conversa"
    },
    {
      "parameters": {
        "operation": "select",
        "schema": {
          "__rl": true,
          "mode": "list",
          "value": "public"
        },
        "table": {
          "__rl": true,
          "value": "n8n_historico_mensagens",
          "mode": "list"
        },
        "where": {
          "values": [
            {
              "column": "session_id",
              "value": "={{ $('Buscar ou criar contato1').item.json.contato.phone_number }}"
            }
          ]
        },
        "combineConditions": "OR",
        "sort": {
          "values": [
            {
              "column": "id"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.postgres",
      "typeVersion": 2.6,
      "position": [
        2224,
        1104
      ],
      "id": "787d767e-1d03-4e7d-b661-a972394c1d9d",
      "name": "Buscar mensagens"
    },
    {
      "parameters": {
        "jsCode": "const historico = $input.all().map(({ json }) => {\n  if (json.message.type === 'human') {\n    return `Usu√°rio: ${json.message.content}`;\n  }\n  return `Assistente: ${json.message.content}`;\n}).join('\\n\\n');\n\nreturn { historico };"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        2432,
        1104
      ],
      "id": "6e665f16-2c0e-477a-8a60-3988438f2f72",
      "name": "Montar hist√≥rico"
    },
    {
      "parameters": {
        "content": "## 12. Gest√£o de liga√ß√µes",
        "height": 80,
        "width": 288,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        256,
        -112
      ],
      "id": "ca1b2f55-6faa-4065-b9b5-62e68c89efac",
      "name": "Sticky Note9"
    },
    {
      "parameters": {
        "content": "## Configurar node Info!!",
        "height": 208,
        "width": 272,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1712,
        1040
      ],
      "typeVersion": 1,
      "id": "f24467c5-0daf-419c-bdf9-69f4a9749762",
      "name": "Sticky Note10"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "40ff895f-f63f-4e4f-bba3-c7d803c277f1",
              "name": "url_chatwoot",
              "value": "<inserir url do seu chatwoot>",
              "type": "string"
            },
            {
              "id": "1b513343-9b6a-4f6e-a012-ed819bf34a31",
              "name": "id_conta",
              "value": "=1",
              "type": "string"
            },
            {
              "id": "d540447e-4fa3-46c0-bc53-1f63433b4a70",
              "name": "id_inbox",
              "value": "1",
              "type": "string"
            },
            {
              "id": "8bf522a6-75fb-434a-854c-b736539309e1",
              "name": "telefone",
              "value": "={{ $json.headers['x-retell-user-number'] || '' }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1792,
        1104
      ],
      "id": "bd707f31-95e8-4a3f-b5b9-5263b762b5dd",
      "name": "Info1"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "B3uXPbfJAnhFWXXx",
          "mode": "list",
          "cachedResultUrl": "/workflow/B3uXPbfJAnhFWXXx",
          "cachedResultName": "<selecionar ou criar subworkflow 10. Buscar ou criar contato + conversa>"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "telefone": "={{ $('Info1').item.json.telefone }}",
            "id_conta": "={{ $('Info1').item.json.id_conta }}",
            "id_inbox": "={{ $('Info1').item.json.id_inbox }}",
            "url_chatwoot": "={{ $('Info1').item.json.url_chatwoot }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "telefone",
              "displayName": "telefone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "id_conta",
              "displayName": "id_conta",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "id_inbox",
              "displayName": "id_inbox",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "url_chatwoot",
              "displayName": "url_chatwoot",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            }
          ],
          "attemptToConvertTypes": true,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        2016,
        1104
      ],
      "id": "915cfb9b-fcd9-4652-a8d5-3d87f3708f6a",
      "name": "Buscar ou criar contato1"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "B3uXPbfJAnhFWXXx",
          "mode": "list",
          "cachedResultUrl": "/workflow/B3uXPbfJAnhFWXXx",
          "cachedResultName": "<selecionar ou criar subworkflow 10. Buscar ou criar contato + conversa>"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "telefone": "={{ $('Info5').item.json.telefone }}",
            "id_conta": "={{ $('Info5').item.json.id_conta }}",
            "id_inbox": "={{ $('Info5').item.json.id_inbox }}",
            "url_chatwoot": "={{ $('Info5').item.json.url_chatwoot }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "telefone",
              "displayName": "telefone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "id_conta",
              "displayName": "id_conta",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "id_inbox",
              "displayName": "id_inbox",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "url_chatwoot",
              "displayName": "url_chatwoot",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        2304,
        1376
      ],
      "id": "138c95c7-8076-4031-ba25-73e8a261d14d",
      "name": "Buscar ou criar contato2"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "B3uXPbfJAnhFWXXx",
          "mode": "list",
          "cachedResultUrl": "/workflow/B3uXPbfJAnhFWXXx",
          "cachedResultName": "<selecionar ou criar subworkflow 10. Buscar ou criar contato + conversa>"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "telefone": "={{ $('Info4').item.json.telefone }}",
            "id_conta": "={{ $('Info4').item.json.id_conta }}",
            "id_inbox": "={{ $('Info4').item.json.id_inbox }}",
            "url_chatwoot": "={{ $('Info4').item.json.url_chatwoot }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "telefone",
              "displayName": "telefone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "id_conta",
              "displayName": "id_conta",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "id_inbox",
              "displayName": "id_inbox",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "url_chatwoot",
              "displayName": "url_chatwoot",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            }
          ],
          "attemptToConvertTypes": true,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        2512,
        2000
      ],
      "id": "6158ad81-5c5c-4b7c-be5a-ee90515dbc36",
      "name": "Buscar ou criar contato3"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "Zc4w9sIZSsbJwDW4",
          "mode": "list",
          "cachedResultUrl": "/workflow/Zc4w9sIZSsbJwDW4",
          "cachedResultName": "<selecionar ou criar subworkflow 06. Integra√ß√£o Asaas>"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "cobranca_valor": "={{ $('Info').item.json.cobranca_valor }}",
            "cobranca_vencimento": "={{ $('Info').item.json.cobranca_vencimento }}",
            "telefone": "={{ $('Info').item.json.telefone }}",
            "nome": "={{ $('Info').item.json.nome }}",
            "cpf": "={{ $('Info').item.json.cpf }}",
            "id_conta": "={{ $('Info').item.json.id_conta }}",
            "id_contato": "={{ $('Buscar ou criar contato').item.json.contato.id }}",
            "asaas_id_cliente": "={{ $('Buscar ou criar contato').item.json.contato.custom_attributes.asaas_id_cliente }}",
            "asaas_id_cobranca": "={{ $('Buscar ou criar contato').item.json.contato.custom_attributes.asaas_id_cobranca }}",
            "url_chatwoot": "={{ $('Info').item.json.url_chatwoot }}",
            "url_asaas": "={{ $('Info').item.json.url_asaas }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "cobranca_valor",
              "displayName": "cobranca_valor",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "cobranca_vencimento",
              "displayName": "cobranca_vencimento",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "telefone",
              "displayName": "telefone",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "nome",
              "displayName": "nome",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "cpf",
              "displayName": "cpf",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "id_conta",
              "displayName": "id_conta",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "id_contato",
              "displayName": "id_contato",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "asaas_id_cliente",
              "displayName": "asaas_id_cliente",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "asaas_id_cobranca",
              "displayName": "asaas_id_cobranca",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "url_chatwoot",
              "displayName": "url_chatwoot",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "url_asaas",
              "displayName": "url_asaas",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            }
          ],
          "attemptToConvertTypes": true,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        2224,
        848
      ],
      "id": "102f03ca-84d9-4a01-91a6-83187a12247c",
      "name": "Criar ou buscar cobran√ßa2"
    },
    {
      "parameters": {
        "respondWith": "text",
        "responseBody": "=<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<Response>\n  <Dial callerId=\"{{ $json.contato }}\">\n    <Sip>sip:{{ $json.telefone_whatsapp }}@sip.retellai.com;transport=tcp?x-call_direction={{ $json.tipo_ligacao }}</Sip>\n  </Dial>\n</Response>",
        "options": {
          "responseHeaders": {
            "entries": [
              {
                "name": "Content-Type",
                "value": "application/xml"
              }
            ]
          }
        }
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        2112,
        1808
      ],
      "id": "b65e8865-2d17-4f97-8d3f-f3a6b3bfe989",
      "name": "Redirecionar liga√ß√£o WhatsApp"
    },
    {
      "parameters": {
        "respondWith": "text",
        "responseBody": "=<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<Response>\n  <Dial callerId=\"{{ $json.contato }}\">\n    <Sip username=\"{{ $json.usuario }}\" password=\"{{ $json.senha }}\">sip:{{ $json.telefone }}@sip.retellai.com;transport=tcp?x-call_direction={{ $json.tipo_ligacao }}</Sip>\n  </Dial>\n</Response>",
        "options": {
          "responseHeaders": {
            "entries": [
              {
                "name": "Content-Type",
                "value": "application/xml"
              }
            ]
          }
        }
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        2816,
        1808
      ],
      "id": "b1dd443c-ff26-490d-9fa1-34cefd5a8f08",
      "name": "Redirecionar liga√ß√£o"
    },
    {
      "parameters": {
        "description": "Use essa ferramenta para refletir sobre algo. Ela n√£o obter√° novas informa√ß√µes nem alterar√° o banco de dados, apenas adicionar√° o pensamento ao registro. Use-a quando for necess√°rio um racioc√≠nio complexo ou alguma mem√≥ria em cache."
      },
      "type": "@n8n/n8n-nodes-langchain.toolThink",
      "typeVersion": 1.1,
      "position": [
        2656,
        1536
      ],
      "id": "a05d6978-99e5-4393-9927-0f0c26526041",
      "name": "Refletir"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        2144,
        592
      ],
      "id": "88f0a43d-5d61-4240-b611-f6f440c969c8",
      "name": "Buscar agendamentos do contato"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "",
        "responseMode": "lastNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        2656,
        592
      ],
      "id": "8581bf90-fb50-429c-bfcb-26fbfccbeaa2",
      "name": "Criar agendamento"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "",
        "responseMode": "lastNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        1584,
        592
      ],
      "id": "4636358b-e10f-4f7b-a931-a1c0c4c76bbd",
      "name": "Buscar janelas dispon√≠veis"
    },
    {
      "parameters": {
        "workflowId": {
          "__rl": true,
          "value": "ZGnLV8lGj8wz8r2T",
          "mode": "list",
          "cachedResultUrl": "/workflow/ZGnLV8lGj8wz8r2T",
          "cachedResultName": "<selecionar ou criar subworkflow 03. Buscar janelas dispon√≠veis Google Calendar>"
        },
        "workflowInputs": {
          "mappingMode": "defineBelow",
          "value": {
            "tamanho_janela_minutos": 60,
            "granularidade": 30,
            "id_agenda": "={{ $json.body.id_agenda }}",
            "periodo_inicio": "={{ $json.body.periodo_inicio }}",
            "periodo_fim": "={{ $json.body.periodo_fim }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "periodo_inicio",
              "displayName": "periodo_inicio",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "periodo_fim",
              "displayName": "periodo_fim",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "id_agenda",
              "displayName": "id_agenda",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "string",
              "removed": false
            },
            {
              "id": "tamanho_janela_minutos",
              "displayName": "tamanho_janela_minutos",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "number",
              "removed": false
            },
            {
              "id": "granularidade",
              "displayName": "granularidade",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "number",
              "removed": false
            },
            {
              "id": "amostras",
              "displayName": "amostras",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "canBeUsedToMatch": true,
              "type": "number",
              "removed": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": true
        },
        "options": {}
      },
      "type": "n8n-nodes-base.executeWorkflow",
      "typeVersion": 1.3,
      "position": [
        1792,
        592
      ],
      "id": "3b9ab5fb-438d-438b-aa50-ac3da27574b6",
      "name": "Buscar janelas dispon√≠veis1"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        1808,
        2096
      ],
      "id": "da85c252-0b71-4727-b8e7-cc0b5f700bb4",
      "name": "WhatsApp Twilio"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "={{ $('Info4').item.json.url_chatwoot }}/twilio/callback",
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={{ $('WhatsApp Twilio').item.json.body }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        2512,
        2192
      ],
      "id": "f05b68fd-9959-4a3e-9867-fc0df2b2e4ba",
      "name": "Enviar para o Chatwoot"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "08f98640-66a6-49d4-af4f-74cc89048425",
              "leftValue": "={{ $('WhatsApp Twilio').item.json.body.Body }}",
              "rightValue": "VOICE_CALL_REQUEST",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        2256,
        2096
      ],
      "id": "d76a59e2-cdc2-4c2d-ab98-51922108a887",
      "name": "Permiss√£o de liga√ß√£o?"
    },
    {
      "parameters": {
        "content": "## Quer entender como funciona?\n\n\n### Assista o v√≠deo, deixe um like, e se inscreva no canal para ter acesso a mais workflows como esse!\n\n[![V√≠deo YouTube Secret√°ria v3](https://i1.ytimg.com/vi_webp/U3Qx-ayR7To/maxresdefault.webp)](https://www.youtube.com/watch?v=U3Qx-ayR7To)",
        "height": 440,
        "width": 500,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        816,
        -16
      ],
      "id": "970de026-a3db-4d76-bf4f-305110103925",
      "name": "Sticky Note13"
    },
    {
      "parameters": {
        "content": "## [Clique aqui e entre agora para tirar suas d√∫vidas](https://lucasmoreira.fazer.ai)\n[![Banner comunidade](https://framerusercontent.com/images/KIXMxk9eKCoCsNeVm1oaz5HnaQ.png)](https://lucasmoreira.fazer.ai)",
        "height": 440,
        "width": 1380,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1328,
        -16
      ],
      "id": "fcc6301f-b127-4da3-86f3-8107b12c36da",
      "name": "Sticky Note36"
    },
    {
      "parameters": {
        "content": "# Checklist - Gest√£o de liga√ß√µes\n\n- [ ] [Clique aqui pra criar sua conta no Twilio](https://console.twilio.com)\n- [ ] Abrir node do Chatwoot para selecionar credencial\n- [ ] Configurar node \"Info2\" (telefone no WhatsApp Oficial)\n- [ ] Configurar node \"Info3\" (telefone normal)\n- [ ] Configurar node \"Info4\"\n- [ ] Configurar subworkflow \"Buscar ou criar contato\"\n\nObs.: Os telefones devem ser os mesmos do Workflow 13 - Agente de Recupera√ß√£o de Leads\n",
        "height": 288,
        "width": 528,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1152,
        1984
      ],
      "id": "fbbfe59d-2ff0-4b5a-b3b9-29dc3459875e",
      "name": "Sticky Note14"
    },
    {
      "parameters": {
        "content": "# Checklist - Follow-up p√≥s-chamada\n- [ ] Abrir nodes da OpenAI, Postgres, e Chatwoot para selecionar credenciais\n- [ ] Configurar node \"Info5\"\n- [ ] Subworkflow \"Buscar ou criar contato\" -> Workflow 10\n",
        "width": 624,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        992,
        1360
      ],
      "id": "ee0f6e2f-3faf-4236-bd13-578c34358574",
      "name": "Sticky Note15"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "06da40d7-221a-4c03-b520-f84ef71722da",
              "name": "telefone_whatsapp",
              "value": "<inserir telefone para liga√ß√µes de whatsapp, includindo +55>",
              "type": "string"
            },
            {
              "id": "adf526c3-eb09-43c4-a73f-7fcbf15954f0",
              "name": "usuario",
              "value": "retell",
              "type": "string"
            },
            {
              "id": "d31238f6-cf64-4cac-bbcb-a3ccc63adf72",
              "name": "senha",
              "value": "<sua senha sip>",
              "type": "string"
            },
            {
              "id": "de53b709-c1b0-49ee-bdef-01c699c35c5f",
              "name": "contato",
              "value": "={{ $json.body.Direction === 'inbound' ? $json.body.From.split(':').last() : $json.body.To.split(':').last() }}",
              "type": "string"
            },
            {
              "id": "7fc606c5-0f0e-480c-925a-09bdf1a30a7e",
              "name": "tipo_ligacao",
              "value": "={{ $json.body.Direction === 'inbound' ? 'inbound' : 'outbound' }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1888,
        1808
      ],
      "id": "ff51dfb7-cc6e-4c6a-9472-28801b017bc1",
      "name": "Info2"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "06da40d7-221a-4c03-b520-f84ef71722da",
              "name": "telefone",
              "value": "<inserir telefone para liga√ß√µes de telefone, includindo +55>",
              "type": "string"
            },
            {
              "id": "2d98e675-ac1d-4b37-acec-f85926e4f59f",
              "name": "usuario",
              "value": "retell",
              "type": "string"
            },
            {
              "id": "4f426fba-3e91-4b25-add1-c115bdc9d7bc",
              "name": "senha",
              "value": "<sua senha sip>",
              "type": "string"
            },
            {
              "id": "a9f26363-d795-497c-a47a-1a2eb572cace",
              "name": "contato",
              "value": "={{ $json.body.Direction === 'inbound' ? $json.body.From : $json.body.To }}",
              "type": "string"
            },
            {
              "id": "33c4d7c5-22e5-4a4b-b9ef-cb6f26e40a51",
              "name": "tipo_ligacao",
              "value": "={{ $json.body.Direction === 'inbound' ? 'inbound' : 'outbound' }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2592,
        1808
      ],
      "id": "bba00007-612c-4ae4-8ea4-b2b7d06c5639",
      "name": "Info3"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "19c17a70-6a49-4032-b8e4-42635fea6f04",
              "name": "id_conta",
              "value": "1",
              "type": "string"
            },
            {
              "id": "487547fa-fb02-4da9-9168-50d074a3cf26",
              "name": "id_inbox",
              "value": "1",
              "type": "string"
            },
            {
              "id": "f74bf6d4-1a71-4e62-b726-ee3a4059f37c",
              "name": "url_chatwoot",
              "value": "<inserir url do seu chatwoot>",
              "type": "string"
            },
            {
              "id": "a3edd128-eaa3-479d-a644-f4004c193c7a",
              "name": "telefone",
              "value": "=+{{ $('WhatsApp Twilio').item.json.body.WaId }}",
              "type": "string"
            },
            {
              "id": "ffad67bd-f2bd-4529-9907-bf870681a33e",
              "name": "permissao_aceita",
              "value": "={{ $('WhatsApp Twilio').item.json.body.ButtonPayload === 'ACCEPTED' }}",
              "type": "boolean"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2032,
        2096
      ],
      "id": "bd219b9e-d232-455a-916d-270ead30479b",
      "name": "Info4"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "19c17a70-6a49-4032-b8e4-42635fea6f04",
              "name": "id_conta",
              "value": "1",
              "type": "string"
            },
            {
              "id": "487547fa-fb02-4da9-9168-50d074a3cf26",
              "name": "id_inbox",
              "value": "1",
              "type": "string"
            },
            {
              "id": "f74bf6d4-1a71-4e62-b726-ee3a4059f37c",
              "name": "url_chatwoot",
              "value": "<inserir url do seu chatwoot>",
              "type": "string"
            },
            {
              "id": "a3edd128-eaa3-479d-a644-f4004c193c7a",
              "name": "telefone",
              "value": "={{ $('Follow-up no WhatsApp ap√≥s chamada').item.json.body.call.direction === 'outbound' ? $('Follow-up no WhatsApp ap√≥s chamada').item.json.body.call.to_number : $('Follow-up no WhatsApp ap√≥s chamada').item.json.body.call.from_number }}",
              "type": "string"
            },
            {
              "id": "01a54a64-d357-447f-84d1-5979d308ee36",
              "name": "transcricao",
              "value": "={{ $('Follow-up no WhatsApp ap√≥s chamada').item.json.body.call.transcript }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2096,
        1376
      ],
      "id": "d9cdcd94-c7bb-4e28-9d5d-5225ef5eb5ff",
      "name": "Info5"
    },
    {
      "parameters": {
        "content": "# Checklist - Retell\n\n[Clique aqui pra criar sua conta no Retell](https://dashboard.retellai.com/?ref=n8n-sec-v3)\n\n## Ferramentas Agente\n- [ ] Abrir nodes do Google Calendar, Chatwoot, e Postgres para selecionar credenciais\n- [ ] Configurar node \"Info\"\n- [ ] Configurar node \"Info1\"\n- [ ] Subworkflow \"Buscar janelas dispon√≠veis\" -> Workflow 03\n- [ ] Subworkflow \"Criar evento\" -> Workflow 04\n- [ ] Subworkflow \"Buscar ou criar contato\" -> Workflow 10\n- [ ] Subworkflow \"Criar ou buscar cobran√ßa\" -> Workflow 06\n",
        "height": 368,
        "width": 576,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        976,
        704
      ],
      "id": "5315a69b-9ed7-48e4-af73-f8e25408d26a",
      "name": "Sticky Note16"
    },
    {
      "parameters": {
        "content": "[![Retell logo](https://cdn.prod.website-files.com/64ada0f2685b2d18caa5e699/659b48b3a5a026456e8bd918_logo-white.png)](https://dashboard.retellai.com/?ref=n8n-sec-v3)",
        "height": 96,
        "width": 256,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1280,
        752
      ],
      "typeVersion": 1,
      "id": "361d826e-12d8-4341-ba1d-1eace4d30911",
      "name": "Sticky Note8"
    },
    {
      "parameters": {
        "content": "## Usei Hostinger pra este workflow.\n## Replique aqui.\n\n\n\n\n\n\n\n\n\n## [Use o cupom `FAZERAI` pra ter 10% de desconto na sua primeira compra!](https://www.hostg.xyz/SHIMV)\n\n\n",
        "height": 316,
        "width": 552,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        256,
        432
      ],
      "id": "1a451b32-12f7-40c7-b8db-4aad5a6155a0",
      "name": "Sticky Note21"
    },
    {
      "parameters": {
        "content": "## N√∫mero para WhatsApp? Salvy\n\n\n\n## [Ative seu n√∫mero](https://use.salvy.com.br/lucas-moreira)\n\n\n",
        "height": 188,
        "width": 440,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1152,
        1776
      ],
      "id": "1b1cc59f-b73c-4965-b0af-8d92d90da98c",
      "name": "Sticky Note22"
    },
    {
      "parameters": {
        "content": "[![Salvy](https://framerusercontent.com/images/dF05SiMwnxfXjHsnkGqZ4Up7ZIg.webp?width=120&height=65)](https://use.salvy.com.br/lucas-moreira)\n",
        "height": 96,
        "width": 150,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        1424,
        1840
      ],
      "id": "be845fd0-494c-4901-ab79-b9095665411b",
      "name": "Sticky Note28"
    },
    {
      "parameters": {
        "content": "[![Hostinger](https://framerusercontent.com/images/ptGVDA4KqG8GLNlWRDzFxaM.png?width=600&height=119)](https://www.hostg.xyz/SHIMV)\n",
        "height": 96,
        "width": 324,
        "color": 6
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        368,
        544
      ],
      "id": "e54ff691-1564-4d94-8f5c-c9360311978e",
      "name": "Sticky Note29"
    },
    {
      "parameters": {
        "content": "[![fazer.ai](https://framerusercontent.com/images/HqY9djLTzyutSKnuLLqBr92KbM.png?scale-down-to=256)](https://fazer.ai?utm_source=n8n&utm_campaign=sec-v3)\n\n## Esse √© um template fa√ßa voc√™ mesmo do canal\n## Lucas Moreira\n\n### Inscreva-se no nosso canal no YouTube\n[![YouTube Lucas Moreira](https://img.shields.io/youtube/channel/subscribers/UCtmp6SxzLscu0GRTbgM8FTw?style=flat-square&logo=youtube&label=Inscreva-se&color=f00)](https://youtube.com/@eulucassmoreira?si=0lH7hwX9pukjhmPQ)\n[![Instagram](https://img.shields.io/badge/instagram-black?logo=instagram&style=for-the-badge)](https://instagram.com/eulucassmoreira)\n[![GitHub fazer.ai](https://img.shields.io/badge/github-%23121011.svg?style=for-the-badge&logo=github&logoColor=white&label)](https://github.com/fazer-ai)\n",
        "height": 440,
        "width": 550,
        "color": 7
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        256,
        -16
      ],
      "id": "41abf0f4-7ac6-44e8-81d6-cffd592f74e4",
      "name": "Sticky Note12"
    },
    {
      "parameters": {
        "content": "@[youtube](BTu3-aXV5Pg)",
        "height": 224,
        "width": 368,
        "color": 5
      },
      "type": "n8n-nodes-base.stickyNote",
      "typeVersion": 1,
      "position": [
        2720,
        -16
      ],
      "id": "577042e0-0f04-4f48-83cc-81048237bcfe",
      "name": "Sticky Note17"
    }
  ],
  "pinData": {},
  "connections": {
    "Follow-up no WhatsApp ap√≥s chamada": {
      "main": [
        [
          {
            "node": "Chamada encerrada?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Info": {
      "main": [
        [
          {
            "node": "Buscar ou criar contato",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Buscar ou criar contato": {
      "main": [
        [
          {
            "node": "Criar ou buscar cobran√ßa2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Nova cobran√ßa?": {
      "main": [
        [
          {
            "node": "Enviar notifica√ß√£o cobran√ßa",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Ignorar busca de cobran√ßa existente",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Criar ou buscar cobran√ßa": {
      "main": [
        [
          {
            "node": "Info",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Chamada encerrada?": {
      "main": [
        [
          {
            "node": "Info5",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Ignorar outros eventos de chamada",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI": {
      "ai_languageModel": [
        [
          {
            "node": "Agente de Follow-up de Chamada",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Memory": {
      "ai_memory": [
        [
          {
            "node": "Agente de Follow-up de Chamada",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Enviar notifica√ß√£o cobran√ßa": {
      "main": [
        [
          {
            "node": "Resultado",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Agente de Follow-up de Chamada": {
      "main": [
        [
          {
            "node": "Enviar mensagem follow-up chamada",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Liga√ß√µes": {
      "main": [
        [
          {
            "node": "Info3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Liga√ß√µes WhatsApp": {
      "main": [
        [
          {
            "node": "Info2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Buscar hist√≥rico da conversa": {
      "main": [
        [
          {
            "node": "Info1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Buscar mensagens": {
      "main": [
        [
          {
            "node": "Montar hist√≥rico",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Info1": {
      "main": [
        [
          {
            "node": "Buscar ou criar contato1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Buscar ou criar contato1": {
      "main": [
        [
          {
            "node": "Buscar mensagens",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Buscar ou criar contato2": {
      "main": [
        [
          {
            "node": "Agente de Follow-up de Chamada",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Buscar ou criar contato3": {
      "main": [
        [
          {
            "node": "Atualizar permiss√£o de liga√ß√£o WhatsApp",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Criar ou buscar cobran√ßa2": {
      "main": [
        [
          {
            "node": "Nova cobran√ßa?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Refletir": {
      "ai_tool": [
        [
          {
            "node": "Agente de Follow-up de Chamada",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Buscar agendamentos do contato": {
      "main": [
        [
          {
            "node": "Buscar eventos",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Criar agendamento": {
      "main": [
        [
          {
            "node": "Criar evento",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Buscar janelas dispon√≠veis": {
      "main": [
        [
          {
            "node": "Buscar janelas dispon√≠veis1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "WhatsApp Twilio": {
      "main": [
        [
          {
            "node": "Info4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Permiss√£o de liga√ß√£o?": {
      "main": [
        [
          {
            "node": "Buscar ou criar contato3",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Enviar para o Chatwoot",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Info2": {
      "main": [
        [
          {
            "node": "Redirecionar liga√ß√£o WhatsApp",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Info3": {
      "main": [
        [
          {
            "node": "Redirecionar liga√ß√£o",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Info4": {
      "main": [
        [
          {
            "node": "Permiss√£o de liga√ß√£o?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Info5": {
      "main": [
        [
          {
            "node": "Buscar ou criar contato2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "f348725b-70c7-468c-97f0-f09c4bf6b715",
  "meta": {
    "instanceId": "936a763e3bf4f68eafc951654ad1b8930511c3731cb9e74c28a4773b3e4d1984"
  },
  "id": "wyLemEMTXgZW4PDU",
  "tags": []
}
